{"ast":null,"code":"import _objectSpread from\"/media/omar/special/New React Projects/food meals project/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/media/omar/special/New React Projects/food meals project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useContext,useState}from'react';import CartContext from'../../store/cart-context';import Modal from'../UI/Modal';import classes from'./Cart.module.css';import CartItem from'./CartItem/CartItem';import OrderForm from'../Checkout/OrderForm';import Loading from'../UI/Loading';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Cart=function Cart(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),orderFormIsVisible=_useState2[0],setOrderFormIsVisible=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isSubmitting=_useState4[0],setIsSubmitting=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),didSubmit=_useState6[0],setDidSubmit=_useState6[1];var orderHandler=function orderHandler(){setOrderFormIsVisible(true);};var cartCtx=useContext(CartContext);var cartItemAddHandler=function cartItemAddHandler(item){cartCtx.addItem(_objectSpread(_objectSpread({},item),{},{amount:1}));};var cartItemRemoveHandler=function cartItemRemoveHandler(id){cartCtx.removeItem(id);};var submitCartDataHandler=function submitCartDataHandler(orderFormData){setIsSubmitting(true);var cartData={orderedMeals:cartCtx.items,totalAmount:cartCtx.totalAmount,userData:orderFormData};fetch('https://meals-project-e557d-default-rtdb.firebaseio.com/order.json',{method:'POST',headers:{'content-type':'application/json'},body:JSON.stringify(cartData)}).then(function(res){setIsSubmitting(false);setDidSubmit(true);return res.json();}).then(function(data){return console.log(data);}).catch(function(error){setIsSubmitting(false);console.log(error);});cartCtx.clearCart();};var cartItems=/*#__PURE__*/_jsx(\"ul\",{children:cartCtx.items.map(function(item){return/*#__PURE__*/_jsx(CartItem,{name:item.name,amount:item.amount,price:item.price,onAdd:cartItemAddHandler.bind(null,item),onRemove:cartItemRemoveHandler.bind(null,item.id)},item.id);})});var totalAmount=\"$\".concat(cartCtx.totalAmount.toFixed(2));var hasCarts=cartCtx.items.length>0;var cartModalContent=/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:classes['cart-items'],children:cartItems}),/*#__PURE__*/_jsxs(\"div\",{className:classes.total,children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total Amount\"}),/*#__PURE__*/_jsx(\"span\",{children:totalAmount})]}),orderFormIsVisible&&/*#__PURE__*/_jsx(OrderForm,{onSubmit:submitCartDataHandler,onCancel:props.onClose}),!orderFormIsVisible&&/*#__PURE__*/_jsxs(\"div\",{className:classes.actions,children:[/*#__PURE__*/_jsx(\"button\",{onClick:props.onClose,className:classes['button--alt'],children:\"Close\"}),hasCarts&&/*#__PURE__*/_jsx(\"button\",{onClick:orderHandler,className:classes.button,children:\"Order\"})]})]});var submittingModalContent=/*#__PURE__*/_jsx(Loading,{});var didSubmitModalContent=/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{style:{marginBottom:'20px'},children:\"Your order has been sent succesfully.\"}),/*#__PURE__*/_jsx(\"div\",{className:classes.actions,children:/*#__PURE__*/_jsx(\"button\",{onClick:props.onClose,className:classes.button,children:\"Close\"})})]});return/*#__PURE__*/_jsxs(Modal,{onClose:props.onClose,children:[!isSubmitting&&!didSubmit&&cartModalContent,isSubmitting&&submittingModalContent,didSubmit&&didSubmitModalContent]});};export default Cart;","map":{"version":3,"names":["useContext","useState","CartContext","Modal","classes","CartItem","OrderForm","Loading","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Cart","props","_useState","_useState2","_slicedToArray","orderFormIsVisible","setOrderFormIsVisible","_useState3","_useState4","isSubmitting","setIsSubmitting","_useState5","_useState6","didSubmit","setDidSubmit","orderHandler","cartCtx","cartItemAddHandler","item","addItem","_objectSpread","amount","cartItemRemoveHandler","id","removeItem","submitCartDataHandler","orderFormData","cartData","orderedMeals","items","totalAmount","userData","fetch","method","headers","body","JSON","stringify","then","res","json","data","console","log","catch","error","clearCart","cartItems","children","map","name","price","onAdd","bind","onRemove","concat","toFixed","hasCarts","length","cartModalContent","className","total","onSubmit","onCancel","onClose","actions","onClick","button","submittingModalContent","didSubmitModalContent","style","marginBottom"],"sources":["/media/omar/special/New React Projects/food meals project/src/components/Cart/Cart.js"],"sourcesContent":["import { useContext, useState } from 'react';\nimport CartContext from '../../store/cart-context';\nimport Modal from '../UI/Modal';\nimport classes from './Cart.module.css';\nimport CartItem from './CartItem/CartItem';\nimport OrderForm from '../Checkout/OrderForm';\nimport Loading from '../UI/Loading';\n\nconst Cart = props => {\n    const [orderFormIsVisible, setOrderFormIsVisible] = useState(false);\n    const [isSubmitting, setIsSubmitting] = useState(false);\n    const [didSubmit, setDidSubmit] = useState(false);\n\n    const orderHandler = () => {\n        setOrderFormIsVisible(true);\n    }\n\n    const cartCtx = useContext(CartContext);\n    const cartItemAddHandler = (item) => {\n        cartCtx.addItem({...item, amount: 1})\n    };\n    const cartItemRemoveHandler = id => {\n        cartCtx.removeItem(id);\n    };\n\n    const submitCartDataHandler = (orderFormData) => {\n        setIsSubmitting(true);\n        const cartData = {\n            orderedMeals: cartCtx.items,\n            totalAmount: cartCtx.totalAmount,\n            userData: orderFormData,\n        }\n        fetch('https://meals-project-e557d-default-rtdb.firebaseio.com/order.json', {\n            method: 'POST',\n            headers: {\n                'content-type': 'application/json'\n            },\n            body: JSON.stringify(cartData),\n        })\n            .then(res => {\n                setIsSubmitting(false);\n                setDidSubmit(true);\n                return res.json();\n            })\n            .then(data => console.log(data))\n            .catch(error => {\n                setIsSubmitting(false)\n                console.log(error);\n            })\n        cartCtx.clearCart();\n    }\n\n    \n\n    const cartItems =\n        <ul>\n            {cartCtx.items.map(item =>\n                <CartItem\n                    key={item.id}\n                    name={item.name}\n                    amount={item.amount}\n                    price={item.price}\n                    onAdd={cartItemAddHandler.bind(null, item)}\n                    onRemove={cartItemRemoveHandler.bind(null, item.id)}\n                />)}\n        </ul>\n    const totalAmount = `$${cartCtx.totalAmount.toFixed(2)}`\n    const hasCarts = cartCtx.items.length > 0;\n\n    const cartModalContent =\n        <>\n            <div className={classes['cart-items']}>\n                {cartItems}\n            </div>\n            <div className={classes.total}>\n                <span>Total Amount</span>\n                <span>{totalAmount}</span>\n            </div>\n            {orderFormIsVisible && <OrderForm onSubmit={submitCartDataHandler} onCancel={props.onClose}/>}\n            {!orderFormIsVisible && <div className={classes.actions}>\n                <button onClick={props.onClose} className={classes['button--alt']}>Close</button>\n                {hasCarts && <button onClick={orderHandler} className={classes.button}>Order</button>}\n            </div>}\n        </>\n    \n    const submittingModalContent = <Loading />;\n\n    const didSubmitModalContent =\n        <>\n            <p style={{marginBottom: '20px'}}>Your order has been sent succesfully.</p>\n            <div className={classes.actions}>\n                <button onClick={props.onClose} className={classes.button}>Close</button>\n            </div>\n        </>;\n\n    return (\n        <Modal onClose={props.onClose}>\n            {!isSubmitting && !didSubmit && cartModalContent}\n            {isSubmitting && submittingModalContent}\n            {didSubmit && didSubmitModalContent}\n        </Modal>\n    )\n}\n\nexport default Cart;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}