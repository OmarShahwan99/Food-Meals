{"ast":null,"code":"import _slicedToArray from\"/media/omar/special/New React Projects/food meals project/Food-Meals/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _toConsumableArray from\"/media/omar/special/New React Projects/food meals project/Food-Meals/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/media/omar/special/New React Projects/food meals project/Food-Meals/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useReducer}from\"react\";import CartContext from\"./cart-context\";import{jsx as _jsx}from\"react/jsx-runtime\";var defaultCartItem={items:[],totalAmount:0};var reducerCartItems=function reducerCartItems(state,action){if(action.type==='ADD'){var exsistingCartItemIndex=state.items.findIndex(function(item){return item.id===action.item.id;});var exsistingCartItem=state.items[exsistingCartItemIndex];var updatedItems;if(exsistingCartItem){var updatedItem=_objectSpread(_objectSpread({},exsistingCartItem),{},{amount:action.item.amount+exsistingCartItem.amount});updatedItems=_toConsumableArray(state.items);updatedItems[exsistingCartItemIndex]=updatedItem;}else{updatedItems=state.items.concat(action.item);}var updatedTotalAmount=state.totalAmount+action.item.price*action.item.amount;return{items:updatedItems,totalAmount:updatedTotalAmount};}else if(action.type==='REMOVE'){var removedItemIndex=state.items.findIndex(function(item){return item.id===action.id;});var existingRemovedItem=state.items[removedItemIndex];var updatedAmount=existingRemovedItem.amount-1;var _updatedItems;var _updatedTotalAmount=state.totalAmount-existingRemovedItem.price;if(updatedAmount<1){_updatedItems=state.items.filter(function(item){return item.id!==action.id;});}else{var _updatedItem=_objectSpread(_objectSpread({},existingRemovedItem),{},{amount:updatedAmount});_updatedItems=_toConsumableArray(state.items);_updatedItems[removedItemIndex]=_updatedItem;}return{items:_updatedItems,totalAmount:_updatedTotalAmount};}if(action.type==='CLEAR'){return defaultCartItem;}return defaultCartItem;};var CartProvider=function CartProvider(props){var _useReducer=useReducer(reducerCartItems,defaultCartItem),_useReducer2=_slicedToArray(_useReducer,2),cartState=_useReducer2[0],dispatchCartAction=_useReducer2[1];var addItemToCartHandler=function addItemToCartHandler(item){dispatchCartAction({type:'ADD',item:item});};var removeItemFromCartHandler=function removeItemFromCartHandler(id){dispatchCartAction({type:'REMOVE',id:id});};var clearCartHandler=function clearCartHandler(){dispatchCartAction({type:'CLEAR'});};var cartContext={items:cartState.items,totalAmount:cartState.totalAmount,addItem:addItemToCartHandler,removeItem:removeItemFromCartHandler,clearCart:clearCartHandler};return/*#__PURE__*/_jsx(CartContext.Provider,{value:cartContext,children:props.children});};export default CartProvider;","map":{"version":3,"names":["useReducer","CartContext","jsx","_jsx","defaultCartItem","items","totalAmount","reducerCartItems","state","action","type","exsistingCartItemIndex","findIndex","item","id","exsistingCartItem","updatedItems","updatedItem","_objectSpread","amount","_toConsumableArray","concat","updatedTotalAmount","price","removedItemIndex","existingRemovedItem","updatedAmount","filter","CartProvider","props","_useReducer","_useReducer2","_slicedToArray","cartState","dispatchCartAction","addItemToCartHandler","removeItemFromCartHandler","clearCartHandler","cartContext","addItem","removeItem","clearCart","Provider","value","children"],"sources":["/media/omar/special/New React Projects/food meals project/Food-Meals/src/store/CartProvider.js"],"sourcesContent":["import { useReducer } from \"react\";\nimport CartContext from \"./cart-context\";\n\nconst defaultCartItem = {\n    items: [],\n    totalAmount: 0\n}\n\nconst reducerCartItems = (state, action) => {\n    if (action.type === 'ADD') {\n        const exsistingCartItemIndex = state.items.findIndex(item => item.id === action.item.id);\n        const exsistingCartItem = state.items[exsistingCartItemIndex];\n\n        let updatedItems;\n        if (exsistingCartItem) {\n            const updatedItem = {\n                ...exsistingCartItem,\n                amount: action.item.amount + exsistingCartItem.amount\n            }\n            updatedItems = [...state.items]\n            updatedItems[exsistingCartItemIndex] = updatedItem;\n        } else {\n            updatedItems = state.items.concat(action.item);\n        }\n        const updatedTotalAmount = state.totalAmount + action.item.price * action.item.amount;\n        return {\n            items: updatedItems,\n            totalAmount: updatedTotalAmount\n        }\n    } else if (action.type === 'REMOVE') {\n        const removedItemIndex = state.items.findIndex(item => item.id === action.id);\n        const existingRemovedItem = state.items[removedItemIndex];\n        let updatedAmount = existingRemovedItem.amount - 1;\n        let updatedItems;\n        const updatedTotalAmount = state.totalAmount - existingRemovedItem.price;\n        if (updatedAmount < 1) {\n            updatedItems = state.items.filter(item => {\n                return item.id !== action.id;\n            })\n        } else {\n            const updatedItem = {\n                ...existingRemovedItem,\n                amount: updatedAmount,\n            }\n            updatedItems = [...state.items];\n            updatedItems[removedItemIndex] = updatedItem;\n            \n        }\n        return {\n            items: updatedItems,\n            totalAmount: updatedTotalAmount\n        }\n    }\n    if (action.type === 'CLEAR') {\n        return defaultCartItem;\n    }\n    return defaultCartItem;\n}\n\nconst CartProvider = props => {\n    const [cartState, dispatchCartAction] = useReducer(reducerCartItems, defaultCartItem);\n    const addItemToCartHandler = (item) => {\n        dispatchCartAction({type: 'ADD', item: item})\n    };\n    const removeItemFromCartHandler = (id) => {\n        dispatchCartAction({type: 'REMOVE', id: id})\n    };\n\n    const clearCartHandler = () => {\n        dispatchCartAction({ type: 'CLEAR' });\n    }\n\n    const cartContext = {\n        items: cartState.items,\n        totalAmount: cartState.totalAmount,\n        addItem: addItemToCartHandler,\n        removeItem: removeItemFromCartHandler,\n        clearCart: clearCartHandler,\n    }\n    return (\n        <CartContext.Provider value={cartContext}>\n            {props.children}\n        </CartContext.Provider>\n    )\n}\n\nexport default CartProvider;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}